# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-11-15 00:20  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
1. ‚ùå –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (`GET /companies/`, `GET /news/`, `GET /notifications/unread`, etc.) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
2. ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ timeout –æ—à–∏–±–∫–∏ –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ endpoint'–æ–≤
3. ‚ùå –õ–∏—à–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ backend
4. ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö QueryClient –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `refetchOnMount`
2. ‚ùå –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é React Query –¥–µ–ª–∞–µ—Ç refetch –ø—Ä–∏ –∫–∞–∂–¥–æ–º –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
3. ‚ùå –°–æ–∑–¥–∞–µ—Ç—Å—è –¥–≤–∞ QueryClient (–≤ `App.tsx` –∏ –≤ `lib/queryClient.ts`)
4. ‚ùå –ù–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ QueryClient

**–§–∞–π–ª:** `frontend/src/lib/queryClient.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `refetchOnMount: 'always'` - –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ stale
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `gcTime: 10 * 60 * 1000` (—Ä–∞–Ω–µ–µ `cacheTime`) - –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `refetchOnReconnect: true` - –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- ‚úÖ –£–∂–µ –µ—Å—Ç—å `refetchOnWindowFocus: false` - –Ω–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞

**–ö–æ–¥:**
```typescript
const defaultConfig: QueryClientConfig = {
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5 minutes - –¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è —Å–≤–µ–∂–∏–º–∏
      gcTime: 10 * 60 * 1000, // 10 minutes - –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ
      retry: 1,
      refetchOnWindowFocus: false, // –ù–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞
      refetchOnMount: 'always', // –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ stale
      refetchOnReconnect: true, // –î–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
    },
    mutations: {
      retry: 1
    }
  },
  queryCache: new QueryCache(),
  mutationCache: new MutationCache()
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ (staleTime –Ω–µ –∏—Å—Ç–µ–∫) - –∑–∞–ø—Ä–æ—Å –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ stale (staleTime –∏—Å—Ç–µ–∫) - –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ

---

### 2. –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π QueryClient –∏–∑ App.tsx

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `App.tsx` —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –Ω–æ–≤—ã–π `QueryClient`, –∞ –≤ `main.tsx` —É–∂–µ –µ—Å—Ç—å `QueryClientProvider` —Å `queryClient` –∏–∑ `lib/queryClient.ts`.

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ QueryClient –≤ `App.tsx`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π `queryClient` –∏–∑ `lib/queryClient.ts`.

**–§–∞–π–ª:** `frontend/src/App.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```typescript
// –ë—ã–ª–æ:
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
const queryClient = new QueryClient({ ... })

// –°—Ç–∞–ª–æ:
import { QueryClientProvider } from '@tanstack/react-query'
import { queryClient } from '@/lib/queryClient'
```

**–í—ã–≤–æ–¥:** ‚úÖ –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω QueryClient –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## üìã –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ React Query

### StaleTime (–≤—Ä–µ–º—è —Å–≤–µ–∂–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö)
- **5 –º–∏–Ω—É—Ç** - –¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è —Å–≤–µ–∂–∏–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ, React Query –ù–ï –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –ø—Ä–∏:
  - –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`refetchOnMount: 'always'` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç staleTime)
  - –§–æ–∫—É—Å–µ –æ–∫–Ω–∞ (`refetchOnWindowFocus: false`)
  - –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (–Ω–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)

### GC Time (–≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ)
- **10 –º–∏–Ω—É—Ç** - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫—ç—à–µ 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è 10 –º–∏–Ω—É—Ç, –æ–Ω–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∫—ç—à–∞
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ

### RefetchOnMount
- **'always'** - –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ (staleTime –Ω–µ –∏—Å—Ç–µ–∫) - –∑–∞–ø—Ä–æ—Å –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ stale (staleTime –∏—Å—Ç–µ–∫) - –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ (< 5 –º–∏–Ω—É—Ç), –∑–∞–ø—Ä–æ—Å—ã –ù–ï –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞ React Query
- ‚úÖ –õ–∏—à–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ backend —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω QueryClient –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
2. ‚úÖ –ú–µ–Ω—å—à–µ timeout –æ—à–∏–±–æ–∫
3. ‚úÖ –ë–æ–ª–µ–µ –ø–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
1. ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ 5 –º–∏–Ω—É—Ç
2. ‚úÖ –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö `useQuery` —Ö—É–∫–æ–≤ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω QueryClient –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –î–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥—Ä—É–≥–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
```typescript
useQuery({
  queryKey: ['news'],
  queryFn: () => ApiService.getNews(),
  staleTime: 10 * 60 * 1000, // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å staleTime
  refetchOnMount: false, // –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  refetchOnWindowFocus: true, // –î–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞
})
```

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-11-15 00:20  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê**




