# –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-01-31  
**–í–µ—Ä—Å–∏—è:** 0.1.0  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–æ–±–∑–æ—Ä-—Ç–µ–∫—É—â–µ–π-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
2. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã](#1-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
3. [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#2-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
4. [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞](#3-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ-–æ–ø—ã—Ç–∞)
5. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é)

---

## –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –û—Å–Ω–æ–≤–Ω–∞—è —Å—É—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏**

–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ **`user_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `companies`**, –∞ –ù–ï –Ω–∞ `subscribed_companies` –≤ `UserPreferences`!

- **"List Competitor" (My Competitors)** = –∫–æ–º–ø–∞–Ω–∏–∏ —Å `Company.user_id = current_user.id`
- **"Tracked companies"** = –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ `UserPreferences.subscribed_companies` (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π)

**–ü—Ä–æ–±–ª–µ–º–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ü—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ–º–ø–∞–Ω–∏–∏ —Å `user_id = current_user.id` (5 –∫–æ–º–ø–∞–Ω–∏–π)
- –≠—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `subscribed_companies`
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–±–∏—Ä–∞–µ—Ç 2 –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ "Tracked companies" (—É–¥–∞–ª—è–µ—Ç –∏–∑ `subscribed_companies`), –æ–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ "List Competitor" (–ø–æ—Ç–æ–º—É —á—Ç–æ `user_id` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è)
- –ù–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies`, –Ω–æ –¥–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º —Å `user_id = current_user.id`

**–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å `user_id`:**
- ‚úÖ `Company` - –∏–º–µ–µ—Ç `user_id` (nullable, –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π) - **–û–°–ù–û–í–ê –ü–ï–†–°–û–ù–ê–õ–ò–ó–ê–¶–ò–ò**
- ‚úÖ `Report` - –∏–º–µ–µ—Ç `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- ‚úÖ `UserPreferences` - –∏–º–µ–µ—Ç `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ) + `subscribed_companies` (–¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π, –ù–ï –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏!)
- ‚úÖ `Notification` - –∏–º–µ–µ—Ç `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- ‚úÖ `NotificationSettings` - –∏–º–µ–µ—Ç `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- ‚úÖ `CompetitorComparison` - –∏–º–µ–µ—Ç `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- ‚úÖ `OnboardingSession` - –∏–º–µ–µ—Ç `user_id` (nullable, –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö —Å–µ—Å—Å–∏–π)
- ‚úÖ `UserActivity` - –∏–º–µ–µ—Ç `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ `get_current_user()` –∏ `get_current_user_optional()`
- ‚úÖ –ó–∞—â–∏—Ç–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `Depends(get_current_user)`

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–¢–ï–ö–£–©–ê–Ø - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø):**
- ‚úÖ –ö–æ–º–ø–∞–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id` –≤ `GET /companies/` - **–ü–†–ê–í–ò–õ–¨–ù–û**
- ‚ö†Ô∏è –ù–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies` –∏–∑ `UserPreferences` - **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û! –î–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–π**
- ‚úÖ –û—Ç—á—ë—Ç—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id` –≤ `GET /reports/` - **–ü–†–ê–í–ò–õ–¨–ù–û**
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id` –≤ `GET /notifications/` - **–ü–†–ê–í–ò–õ–¨–ù–û**

**–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ª–æ–≥–∏–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ö–æ–º–ø–∞–Ω–∏–∏: —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `Company.user_id = current_user.id` ‚úÖ
- –ù–æ–≤–æ—Å—Ç–∏: –¥–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `NewsItem.company_id IN (SELECT id FROM companies WHERE user_id = current_user.id)` ‚úÖ
- –û—Ç—á—ë—Ç—ã: —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `Report.user_id = current_user.id` ‚úÖ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `Notification.user_id = current_user.id` ‚úÖ

---

## 1. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ö–æ–º–ø–∞–Ω–∏–∏: `GET /companies/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`user_id == current_user.id`)
- ‚ö†Ô∏è –ù–æ–≤–æ—Å—Ç–∏: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `subscribed_companies` –∏–∑ `UserPreferences` - **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û! –î–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–π**
- ‚úÖ –û—Ç—á—ë—Ç—ã: `GET /reports/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç—á—ë—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: `GET /notifications/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –í `GET /companies/{company_id}` –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ –ë–î, —á—Ç–æ –º–æ–∂–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —á—É–∂–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –í `GET /news/{news_id}` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ - –ª—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ª—é–±—É—é –Ω–æ–≤–æ—Å—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –µ–≥–æ –∫–æ–º–ø–∞–Ω–∏—è–º (`user_id`)
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –í `GET /news/` –Ω–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies`, –Ω–æ –¥–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º —Å `user_id = current_user.id`
- ‚ö†Ô∏è –í `POST /competitors/compare` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è, —á—Ç–æ –≤—Å–µ `company_ids` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (`user_id = current_user.id`)
- ‚ö†Ô∏è –í `GET /competitors/suggest/{company_id}` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `company_id` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (`user_id = current_user.id`)
- ‚ö†Ô∏è –í `GET /competitors/activity/{company_id}` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–∞–Ω–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç:**

```python:backend/app/api/v1/endpoints/companies.py
# –ü–†–û–ë–õ–ï–ú–ê: –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º –∫–æ–º–ø–∞–Ω–∏—é, –ø–æ—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø
result = await db.execute(
    select(Company).where(Company.id == uuid_obj)
)
company = result.scalar_one_or_none()

if not company:
    raise HTTPException(status_code=404, detail="Company not found")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è - –º–æ–∂–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
if company.user_id is not None:
    if not current_user or company.user_id != current_user.id:
        raise HTTPException(status_code=403, detail="Access denied")
```

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
```python
# –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø –≤ –∑–∞–ø—Ä–æ—Å–µ
query = select(Company).where(Company.id == uuid_obj)
if current_user:
    query = query.where(
        or_(
            Company.user_id == current_user.id,
            Company.user_id.is_(None)  # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
        )
    )
else:
    query = query.where(Company.user_id.is_(None))

company = result.scalar_one_or_none()
if not company:
    raise HTTPException(status_code=404, detail="Company not found")
```

### ‚úÖ –ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å–µ —Å–≤–æ–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –≤ `GET /companies/`
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å–µ —Å–≤–æ–∏ –æ—Ç—á—ë—Ç—ã –≤ `GET /reports/`
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å–µ —Å–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ `GET /notifications/`
- ‚úÖ –ù–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies`, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ù–µ—Ç —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–Ω–µ—Ç —Ç–µ—Å—Ç–æ–≤)

### ‚ö†Ô∏è –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ `POST /companies/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `user_id = current_user.id`
- ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ç—á—ë—Ç–∞ —á–µ—Ä–µ–∑ `POST /reports/create` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `user_id = current_user.id`
- ‚úÖ –ü—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ –∫–æ–º–ø–∞–Ω–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å `user_id = final_user_id`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –í `POST /companies/scan` (–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è) –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–µ–º–∞—è –∫–æ–º–ø–∞–Ω–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é - —ç—Ç–æ —Ç–æ–ª—å–∫–æ preview, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π
- ‚ö†Ô∏è –í `POST /onboarding/complete` –µ—Å—Ç—å —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é

### ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `report.user_id == current_user.id`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `notification.user_id == current_user.id`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –í `POST /companies/` (—Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞, –Ω–æ –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï –ø–æ–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏, —á—Ç–æ –º–æ–∂–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚ö†Ô∏è –í `PUT /news/{news_id}` –∏ `DELETE /news/{news_id}` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ - –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –ª—é–±—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
- ‚ö†Ô∏è –í `POST /competitors/compare` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–º–ø–∞–Ω–∏—è–º

---

## 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ –ó–∞—â–∏—Ç–∞ API/–ë—ç–∫–µ–Ω–¥–∞

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏, –∑–∞—â–∏—â–µ–Ω—ã —á–µ—Ä–µ–∑ `Depends(get_current_user)`
- ‚úÖ `get_current_user()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏/–Ω–µ–≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `get_current_user_optional()` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `get_current_user_optional()`, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–µ –¥–∞–Ω–Ω—ã—Ö –∞–Ω–æ–Ω–∏–º–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `GET /companies/` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏, –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

### ‚ùå –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–º–µ–Ω—ã ID

**–°—Ç–∞—Ç—É—Å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. **–ö–†–ò–¢–ò–ß–ù–û: `GET /companies/{company_id}`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–æ–º–ø–∞–Ω–∏—è —Å —á—É–∂–∏–º ID
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä `user_id` –≤ SQL –∑–∞–ø—Ä–æ—Å

2. **–ö–†–ò–¢–ò–ß–ù–û: `GET /news/{news_id}`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–≤–æ—Å—Ç–∏
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ª—é–±—É—é –Ω–æ–≤–æ—Å—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –µ–≥–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `news.company_id` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `subscribed_companies` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. **–ö–†–ò–¢–ò–ß–ù–û: `POST /competitors/compare`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è, —á—Ç–æ –≤—Å–µ `company_ids` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –µ–≥–æ `subscribed_companies`
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —á—É–∂–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π `company_id` –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º

4. **–ö–†–ò–¢–ò–ß–ù–û: `GET /competitors/suggest/{company_id}`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ `company_id`
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –¥–ª—è —á—É–∂–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `company_id` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –µ–≥–æ `subscribed_companies`

5. **–ö–†–ò–¢–ò–ß–ù–û: `GET /competitors/activity/{company_id}`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ `company_id`
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á—É–∂–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–º–ø–∞–Ω–∏–∏

6. **–ö–†–ò–¢–ò–ß–ù–û: `PUT /news/{news_id}` –∏ `DELETE /news/{news_id}`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–≤–æ—Å—Ç–∏
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å —á—É–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–æ–≤–æ—Å—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–æ–º–ø–∞–Ω–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

7. **–ö–†–ò–¢–ò–ß–ù–û: `GET /reports/{report_id}`**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á—ë—Ç–∞
   - –†–∏—Å–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –æ—Ç—á—ë—Ç —Å —á—É–∂–∏–º ID
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä `user_id` –≤ SQL –∑–∞–ø—Ä–æ—Å

**–ü—Ä–∏–º–µ—Ä—ã —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π:**

```python:backend/app/api/v1/endpoints/news.py
# –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–≤–æ—Å—Ç–∏
@router.get("/{news_id}", response_model=Dict[str, Any])
async def get_news_item(
    news_id: str,
    facade: NewsFacade = Depends(get_news_facade),
):
    news_item = await facade.get_news_item(news_id, include_relations=True)
    # –ù–ï–¢ –ü–†–û–í–ï–†–ö–ò, —á—Ç–æ news_item.company_id –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫–æ–º–ø–∞–Ω–∏–∏ —Å user_id = current_user.id!
    return serialize_news_item(news_item, include_activities=True)
```

```python:backend/app/api/v1/endpoints/competitors.py
# –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ company_id
@router.post("/compare")
async def compare_companies(
    request_data: dict = Body(...),
    current_user: User = Depends(get_current_user),
    ...
):
    company_ids = request_data.get('company_ids', [])
    # –ù–ï–¢ –í–ê–õ–ò–î–ê–¶–ò–ò, —á—Ç–æ –≤—Å–µ company_ids –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (user_id = current_user.id)!
    comparison_data = await facade.compare_companies(
        company_ids=company_ids,
        ...
    )
```

### ‚úÖ –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç `user_id` –≤ payload (`sub`)
- ‚úÖ `get_current_user()` –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î –ø–æ —Ç–æ–∫–µ–Ω—É
- ‚úÖ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ FastAPI dependencies

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ù–µ—Ç —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –±—ã–ª —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω (–Ω–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—Ç–∑—ã–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤)
- ‚ö†Ô∏è –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –±—ã–ª –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞)

---

## 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞

### ‚úÖ –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥)

**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π –∏ –ø–æ–¥–ø–∏—Å–æ–∫ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ `UserPreferences` —Å –ø—É—Å—Ç—ã–º–∏ `subscribed_companies`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ù–µ—Ç —è–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è "–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞" –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–π
- ‚ö†Ô∏è –ü—Ä–∏ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ –∫–æ–º–ø–∞–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫

### ‚ö†Ô∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –í Header –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`user.full_name`)
- ‚úÖ –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –µ—Å—Ç—å –∏–Ω–¥–∏–∫–∞—Ü–∏—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ù–µ—Ç —è–≤–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ "–í–∞—à–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã" –∏–ª–∏ "–í–∞—à–∏ –Ω–æ–≤–æ—Å—Ç–∏" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ö†Ô∏è –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏, —á—Ç–æ –Ω–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º

### ‚ö†Ô∏è –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ù–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies`
- ‚úÖ –ö–æ–º–ø–∞–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id`
- ‚úÖ –û—Ç—á—ë—Ç—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id`
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –ù–µ –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é:
  - `GET /news/{news_id}` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–∏!)
  - `GET /news/` - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ `subscribed_companies`, –Ω–æ –¥–æ–ª–∂–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–π!
  - `GET /competitors/*` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–∞–Ω–∏—è–º (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ `user_id`!)
  - `PUT /news/{news_id}` –∏ `DELETE /news/{news_id}` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–∏!)
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: –Ω–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies`, –Ω–æ –¥–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–π
- ‚ö†Ô∏è –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–∞ - –≤ –æ–¥–Ω–∏—Ö –º–µ—Å—Ç–∞—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ SQL, –≤ –¥—Ä—É–≥–∏—Ö - –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–≤–æ—Å—Ç—è–º**
   - `GET /news/{news_id}` - –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ª—é–±—É—é –Ω–æ–≤–æ—Å—Ç—å
   - `PUT /news/{news_id}` - –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—É—é –Ω–æ–≤–æ—Å—Ç—å
   - `DELETE /news/{news_id}` - –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –ª—é–±—É—é –Ω–æ–≤–æ—Å—Ç—å

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–∞–Ω–∏—è–º –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö**
   - `GET /companies/{company_id}` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è (—Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é)
   - `GET /competitors/suggest/{company_id}` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞
   - `GET /competitors/activity/{company_id}` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞
   - `POST /competitors/compare` - –Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ `company_ids`

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Ç—á—ë—Ç–∞–º**
   - `GET /reports/{report_id}` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è (—Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é)

### üü° –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å

4. **–ö–†–ò–¢–ò–ß–ù–û: –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**
   - –ö–æ–º–ø–∞–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ) - "List Competitor"
   - –ù–æ–≤–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `subscribed_companies` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!) - –¥–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–π
   - –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ "Tracked companies" (`subscribed_companies`) –æ–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ "List Competitor" (–ø–æ—Ç–æ–º—É —á—Ç–æ `user_id` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è), –Ω–æ –Ω–æ–≤–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è
   - –†–µ—à–µ–Ω–∏–µ: –ù–æ–≤–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ `user_id` –∫–æ–º–ø–∞–Ω–∏–π, –∫–∞–∫ –∏ "List Competitor"

5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —è–≤–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**
   - –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ "–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
   - –ù–µ—Ç –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

### üü¢ –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å

6. **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–π –≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ**
   - –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –ø—É—Ç–∞–Ω–∏—Ü–µ

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ—Å—Ç–µ–π –≤ GET /news/ (–ø–æ user_id –∫–æ–º–ø–∞–Ω–∏–π, –ù–ï –ø–æ subscribed_companies!)**
   ```python
   # –í GET /news/
   if current_user and not parsed_company_ids:
       # –ü–†–ê–í–ò–õ–¨–ù–û: —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ user_id –∫–æ–º–ø–∞–Ω–∏–π
       companies_result = await db.execute(
           select(Company.id).where(Company.user_id == current_user.id)
       )
       user_company_ids = [c.id for c in companies_result.scalars().all()]
       parsed_company_ids = user_company_ids
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–≤–æ—Å—Ç—è–º (–ø–æ user_id –∫–æ–º–ø–∞–Ω–∏–π, –ù–ï –ø–æ subscribed_companies!)**
   ```python
   # –í GET /news/{news_id}
   if current_user:
       # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–º–ø–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
       company_result = await db.execute(
           select(Company).where(
               and_(
                   Company.id == news_item.company_id,
                   Company.user_id == current_user.id
               )
           )
       )
       company = company_result.scalar_one_or_none()
       if not company:
           raise HTTPException(status_code=403, detail="Access denied")
   ```

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–∞–Ω–∏—è–º**
   ```python
   # –í GET /companies/{company_id}
   query = select(Company).where(Company.id == uuid_obj)
   if current_user:
       query = query.where(
           or_(
               Company.user_id == current_user.id,
               Company.user_id.is_(None)
           )
       )
   else:
       query = query.where(Company.user_id.is_(None))
   ```

4. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é company_ids –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ user_id, –ù–ï subscribed_companies!)**
   ```python
   # –í POST /competitors/compare
   for company_id in company_ids:
       # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (user_id = current_user.id)
       company = await check_company_access(company_id, current_user, db)
       if not company:
           raise HTTPException(status_code=403, detail=f"Access denied to company {company_id}")
   ```

5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Ç—á—ë—Ç–∞–º**
   ```python
   # –í GET /reports/{report_id}
   query = select(Report).where(
       and_(
           Report.id == report_uuid,
           Report.user_id == current_user.id
       )
   )
   report = result.scalar_one_or_none()
   if not report:
       raise HTTPException(status_code=404, detail="Report not found")
   ```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –£–ª—É—á—à–µ–Ω–∏–µ UX

6. **–î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "–í–∞—à–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã" –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

7. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥ –∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**
   - –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π helper –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–∞–Ω–∏—è–º
   - –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π helper –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–æ–≤–æ—Å—Ç—è–º

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

8. **–°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (–ø–æ user_id –∫–æ–º–ø–∞–Ω–∏–π!)**
   ```python
   # backend/app/core/access_control.py
   async def check_company_access(
       company_id: UUID,
       user: Optional[User],
       db: AsyncSession
   ) -> Optional[Company]:
       """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ user_id –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—ë"""
       query = select(Company).where(Company.id == company_id)
       if user:
           query = query.where(Company.user_id == user.id)
       else:
           query = query.where(Company.user_id.is_(None))
       result = await db.execute(query)
       return result.scalar_one_or_none()
   
   async def check_news_access(
       news_id: UUID,
       user: Optional[User],
       db: AsyncSession
   ) -> Optional[NewsItem]:
       """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ user_id –∫–æ–º–ø–∞–Ω–∏–∏ (–ù–ï –ø–æ subscribed_companies!)"""
       result = await db.execute(
           select(NewsItem).where(NewsItem.id == news_id)
       )
       news_item = result.scalar_one_or_none()
       if not news_item:
           return None
       
       # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–º–ø–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
       if user:
           company_result = await db.execute(
               select(Company).where(
                   and_(
                       Company.id == news_item.company_id,
                       Company.user_id == user.id
                   )
               )
           )
           company = company_result.scalar_one_or_none()
           if not company:
               return None
       
       return news_item
   ```

8. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏**
   - –¢–µ—Å—Ç—ã –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
   - –¢–µ—Å—Ç—ã –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–º–µ–Ω—ã ID
   - –¢–µ—Å—Ç—ã —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏

---

## –§–∞–π–ª—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Backend

1. **`backend/app/api/v1/endpoints/news.py`**
   - `GET /news/{news_id}` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞
   - `PUT /news/{news_id}` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞
   - `DELETE /news/{news_id}` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞

2. **`backend/app/api/v1/endpoints/companies.py`**
   - `GET /companies/{company_id}` - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞ (—Ñ–∏–ª—å—Ç—Ä –≤ SQL)

3. **`backend/app/api/v1/endpoints/competitors.py`**
   - `POST /competitors/compare` - –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é `company_ids`
   - `GET /competitors/suggest/{company_id}` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞
   - `GET /competitors/activity/{company_id}` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞

4. **`backend/app/api/v1/endpoints/reports.py`**
   - `GET /reports/{report_id}` - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞ (—Ñ–∏–ª—å—Ç—Ä –≤ SQL)

5. **`backend/app/core/access_control.py`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞

### Frontend

6. **`frontend/src/pages/DashboardPage.tsx`**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ü–∏—é "–í–∞—à–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã"
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

7. **`frontend/src/components/Header.tsx`**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫

---

## –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê –Ω–µ –≤–∏–¥–∏—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê –Ω–µ –≤–∏–¥–∏—Ç –Ω–æ–≤–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë
- [ ] –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ê –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ `/companies/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401
- [ ] –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —á—É–∂—É—é –∫–æ–º–ø–∞–Ω–∏—é –ø–æ ID –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 (–Ω–µ 403)
- [ ] –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —á—É–∂—É—é –Ω–æ–≤–æ—Å—Ç—å –ø–æ ID –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403
- [ ] –ü–æ–ø—ã—Ç–∫–∞ —Å—Ä–∞–≤–Ω–∏—Ç—å —á—É–∂–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403
- [ ] –ü–æ–¥–º–µ–Ω–∞ `user_id` –≤ –∑–∞–ø—Ä–æ—Å–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã UX

- [ ] –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É "–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞"
- [ ] –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–í–∞—à–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã"
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫
- [ ] –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–µ–µ—Ç **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞** –∫ –Ω–æ–≤–æ—Å—Ç—è–º, –∫–æ–º–ø–∞–Ω–∏—è–º –∏ –æ—Ç—á—ë—Ç–∞–º –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**, —á—Ç–æ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —á—É–∂–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** `company_ids` –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
- –£–ª—É—á—à–∏—Ç—å UX —Å —è–≤–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–∞
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
2. –£–ª—É—á—à–µ–Ω–∏–µ UX (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç–µ—Å—Ç—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)

