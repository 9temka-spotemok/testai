# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–î–∞—Ç–∞:** 2025-11-14 16:40  
**–°—Ç–∞—Ç—É—Å:** üü¢ –ì–æ—Ç–æ–≤–æ –∫ –ø–µ—Ä–µ—Å—á—ë—Ç—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Redis: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- PostgreSQL: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (131 –∫–æ–º–ø–∞–Ω–∏—è)
- Celery Worker: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, —Å–ª—É—à–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å `analytics`
- Backend API: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–ö–æ–º–ø–∞–Ω–∏—è:** `75eee989-a419-4220-bdc6-810c4854a1fe`

**–ù–æ–≤–æ—Å—Ç–∏:**
- –í—Å–µ–≥–æ: **71**
- –° `sentiment`: **71** (100%) ‚úÖ
- –° `topic`: **14** (20%) ‚úÖ (—á–∞—Å—Ç–∏—á–Ω–æ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- –° `priority_score`: **71** (100%) ‚úÖ

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ sentiment:**
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ SQL

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–µ—Ä–µ—Å—á—ë—Ç—É:** ‚úÖ **–ì–û–¢–û–í–û**

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Å—á—ë—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–ß–µ—Ä–µ–∑ UI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É Competitor Analysis
2. –í—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º "Company Analysis"
3. –í—ã–±—Ä–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ID: `75eee989-a419-4220-bdc6-810c4854a1fe`)
4. –ù–∞–∂–∞—Ç—å "Analyze Company"
5. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
6. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **"Recompute"** –≤ ImpactPanel
7. –ü–æ–¥–æ–∂–¥–∞—Ç—å 5-10 —Å–µ–∫—É–Ω–¥
8. –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ß–µ—Ä–µ–∑ API:**
```bash
POST /api/v2/analytics/companies/75eee989-a419-4220-bdc6-810c4854a1fe/recompute?period=daily&lookback=60
Authorization: Bearer YOUR_TOKEN
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –í –ë–î
docker exec shot-news-postgres psql -U shot_news -d shot_news -c "
SELECT period, COUNT(*) as snapshots, 
       MAX(period_start) as latest,
       AVG(impact_score) as avg_impact
FROM company_analytics_snapshots 
WHERE company_id = '75eee989-a419-4220-bdc6-810c4854a1fe'
GROUP BY period;"

# –ß–µ—Ä–µ–∑ API
GET /api/v2/analytics/companies/75eee989-a419-4220-bdc6-810c4854a1fe/impact/latest?period=daily
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –≤ ImpactPanel –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:
- ‚úÖ Impact Score (–Ω–µ 0)
- ‚úÖ Trend Delta
- ‚úÖ Impact Breakdown (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- ‚úÖ Recent Trend (–≥—Ä–∞—Ñ–∏–∫)
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏: news_total, pricing_changes, feature_updates

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`backend/scripts/process_company_news_nlp.py`** ‚Äî —Å–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π NLP
2. **`backend/scripts/diagnose_analytics.py`** ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
3. **`docs/TROUBLESHOOTING_ANALYTICS_RECOMPUTE.md`** ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º
4. **`docs/DIAGNOSTIC_REPORT.md`** ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
5. **`docs/DIAGNOSTIC_SUMMARY.md`** ‚Äî –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
6. **`docs/DIAGNOSTIC_RESULTS.md`** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
7. **`docs/DIAGNOSTIC_FINAL.md`** ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª

## ‚úÖ –ò—Ç–æ–≥

**–°—Ç–∞—Ç—É—Å:** üü¢ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω—ã –Ω–æ–≤–æ—Å—Ç–∏ NLP (71/71)
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- ‚è≥ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Å—á—ë—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ UI

---

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ—Å—á—ë—Ç–∞:**
```bash
# –ß–µ—Ä–µ–∑ curl (–Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω)
curl -X POST "http://localhost:8000/api/v2/analytics/companies/75eee989-a419-4220-bdc6-810c4854a1fe/recompute?period=daily&lookback=60" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ UI:** –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "Recompute" –≤ ImpactPanel




