# üî¥ –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-11-14 19:30  
**–°—Ç–∞—Ç—É—Å:** üü° –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–∞—Ç—É—Å |
|------------|------------|--------|
| News Items | 71 | ‚úÖ –ï—Å—Ç—å |
| News with Sentiment | 71 (100%) | ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω—ã |
| Snapshots | 0 | ‚ùå **–ü–†–û–ë–õ–ï–ú–ê** |
| Change Events | 0 | ‚ö†Ô∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
| Pricing Snapshots | 0 | ‚ö†Ô∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É)

### 1. ‚ùå –ù–µ—Ç Analytics Snapshots

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í –ë–î **0 snapshots** –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π
- UI –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å Impact Score, –º–µ—Ç—Ä–∏–∫–∏, –≥—Ä–∞—Ñ–∏–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–µ—Ä–µ—Å—á—ë—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`recompute_company_analytics`) –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è
- Snapshots —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —è–≤–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –ø–µ—Ä–µ—Å—á—ë—Ç–∞

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ùå ImpactPanel –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –∏–ª–∏ –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚ùå –ù–µ—Ç Impact Score
- ‚ùå –ù–µ—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ç—Ä–µ–Ω–¥–æ–≤
- ‚ùå –ù–µ—Ç Impact Breakdown

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ß–µ—Ä–µ–∑ UI: –ù–∞–∂–∞—Ç—å "Recompute" –≤ ImpactPanel
# –ò–ª–∏ —á–µ—Ä–µ–∑ API:
POST /api/v2/analytics/companies/{id}/recompute?period=daily&lookback=60
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ **–ö–†–ò–¢–ò–ß–ù–û** - –±–µ–∑ —ç—Ç–æ–≥–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç)

### 2. ‚ö†Ô∏è –ù–µ—Ç Change Events

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í –ë–î **0 change events** –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã "Pricing Changes" –∏ "Feature Updates" –≤ Impact Score –±—É–¥—É—Ç = 0

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–∞—Ä—Å–∏–Ω–≥ pricing —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è
- –ü–∞—Ä—Å–µ—Ä—ã –ï–°–¢–¨ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è Impact Score –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω –±–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ pricing/features
- ‚ö†Ô∏è Knowledge Graph –Ω–µ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–≤—è–∑–∏ —Å change events
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Celery –∑–∞–¥–∞—á—É
from app.tasks.competitors import ingest_pricing_page

task = ingest_pricing_page.delay(
    company_id="75eee989-a419-4220-bdc6-810c4854a1fe",
    source_url="https://snowseo.com/pricing",
    source_type="news_site"
)
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–°–†–ï–î–ù–ò–ô** - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

### 3. ‚ö†Ô∏è –ù–µ—Ç API endpoint –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ pricing

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —É–¥–æ–±–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ pricing —Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ API
- –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Celery –∑–∞–¥–∞—á—É –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å endpoint

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è –ù–µ—É–¥–æ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∏–∑ UI –∏–ª–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
- ‚ö†Ô∏è –ù–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è pricing —Å—Ç—Ä–∞–Ω–∏—Ü

**–†–µ—à–µ–Ω–∏–µ:**
–°–æ–∑–¥–∞—Ç—å endpoint –≤ `backend/app/api/v1/endpoints/competitors.py`:
```python
@router.post("/ingest-pricing")
async def ingest_pricing_page_endpoint(...):
    """–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ pricing —Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–ù–ò–ó–ö–ò–ô** - –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å —á–µ—Ä–µ–∑ Celery

---

## üü¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å)

### 4. üü¢ –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Å—á—ë—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –û—à–∏–±–∫–∏ –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ë–î (rollback –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)
- –ù–∞—Ä—É—à–µ–Ω–∏–µ UniqueConstraint –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ snapshot
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∏–∫–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫

**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
- –õ–æ–≥–∏ Celery worker —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–∫–∏
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –∏–ª–∏ 404
- Snapshots –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ—Å—á—ë—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker logs shot-news-celery-worker`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –ë–î
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (sentiment, priority_score)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ **–ù–ò–ó–ö–ò–ô** - –ø–æ–∫–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

---

### 5. üü¢ –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º UI

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- React Query –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Å—á—ë—Ç–∞
- –ö—ç—à –Ω–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
- –û—à–∏–±–∫–∏ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–æ–≤ API

**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
- UI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "Recompute"
- –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è —Å—Ç–∞—Ä—ã–º–∏
- –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `useCompanyAnalyticsInsights` hook
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ React Query (staleTime, refetchInterval)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ **–ù–ò–ó–ö–ò–ô** - –ø–æ–∫–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

---

## üìã –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–±–ª–µ–º

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|---|----------|--------------|--------|---------|
| 1 | –ù–µ—Ç Snapshots | üî¥ –ö–†–ò–¢–ò–ß–ù–û | ‚ùå –ê–∫—Ç–∏–≤–Ω–æ | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Å—á—ë—Ç |
| 2 | –ù–µ—Ç Change Events | üü° –°—Ä–µ–¥–Ω–µ | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç | –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ pricing |
| 3 | –ù–µ—Ç API endpoint | üü° –ù–∏–∑–∫–æ | ‚ö†Ô∏è –ù–µ—É–¥–æ–±–Ω–æ | –°–æ–∑–¥–∞—Ç—å endpoint |
| 4 | –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Å—á—ë—Ç–µ | üü¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ | ‚úÖ –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ | –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ |
| 5 | –ü—Ä–æ–±–ª–µ–º—ã —Å UI | üü¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ | ‚úÖ –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å |

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ):

1. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Å—á—ë—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è snapshots
   - –ß–µ—Ä–µ–∑ UI: "Recompute" –≤ ImpactPanel
   - –ò–ª–∏ —á–µ—Ä–µ–∑ API: `POST /api/v2/analytics/companies/{id}/recompute`

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):

2. ‚ö†Ô∏è **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ pricing —Å—Ç—Ä–∞–Ω–∏—Ü** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è change events
   - –ß–µ—Ä–µ–∑ Celery –∑–∞–¥–∞—á—É `ingest_pricing_page`
   - –î–ª—è –∫–æ–º–ø–∞–Ω–∏–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å pricing —Å—Ç—Ä–∞–Ω–∏—Ü—ã

3. ‚ö†Ô∏è **–°–æ–∑–¥–∞—Ç—å API endpoint** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ pricing
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `backend/app/api/v1/endpoints/competitors.py`
   - –£–ø—Ä–æ—Å—Ç–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ UI

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

4. üü¢ **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å Celery worker logs
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å API logs
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å frontend console

5. üü¢ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å UI** –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ—Å—á—ë—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Impact Score
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Redis, PostgreSQL, Celery)
- ‚úÖ NLP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π (71/71 –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ)
- ‚úÖ Backend API endpoints
- ‚úÖ Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –ü–∞—Ä—Å–µ—Ä—ã pricing —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ Celery –∑–∞–¥–∞—á–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã

---

**–í—ã–≤–æ–¥:** –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ snapshots. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é. Change events - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —É–ª—É—á—à–∏—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.




