# Phase 0 — Baseline Metrics Template

Используйте этот шаблон, чтобы зафиксировать исходные показатели до старта рефакторинга. Заполняйте и обновляйте по мере необходимости; сохраняйте как отдельный файл (например, `2025-11-10_baseline.md`) в этой же директории.

---

## 1. API Performance
| Endpoint | Метод | P50 (мс) | P95 (мс) | P99 (мс) | RPS теста | Инструмент / Комментарий |
|----------|-------|----------|----------|----------|-----------|---------------------------|
| `/api/v1/news` | GET |  |  |  |  |  |
| `/api/v1/companies/scan` | POST |  |  |  |  |  |
| `/api/v2/analytics/companies/{id}/impact/latest` | GET |  |  |  |  |  |
| _добавьте другие критичные ручки_ |  |  |  |  |  |  |

- **Нагрузка:** опишите, какой профиль использовался (`hey`, `k6`, `ab`; количество запросов, продолжительность).
- **Наблюдения:** кратко укажите выявленные bottleneck’и или нестабильности.

## 2. Celery / Background Jobs
| Очередь | Таск | Среднее время (сек.) | P95 (сек.) | Выполнений/час | Ошибок (%) | Источник данных |
|---------|------|----------------------|------------|----------------|------------|-----------------|
| analytics | `recompute_all_analytics` |  |  |  |  |  |
| notifications | `dispatch_notification_deliveries` |  |  |  |  |  |
| scraping | `scrape_ai_blogs` |  |  |  |  |  |
| _добавьте другие важные_ |  |  |  |  |  |  |

- **Мониторинг:** укажите, как собирались данные (Flower, Prometheus, временные логи).
- **Инциденты:** есть ли таймауты, ретраи, узкие места?

## 3. Frontend Web Vitals / UX
- **Методика:** Lighthouse (Mobile/Desktop), Playwright trace, браузер DevTools.
- **Сценарии:**  
  - Competitor Analysis → Export  
  - Digest Settings → Save  
  - Dashboard Landing  
- **Метрики:**  
  - LCP, FID (INP), CLS, TTI, TBT.  
  - Время загрузки критичных API для страниц (среднее/макс).

| Сценарий | Платформа | LCP | INP/FID | CLS | Примечания |
|----------|-----------|-----|---------|-----|------------|
| Competitor Analysis | Desktop |  |  |  |  |
| Competitor Analysis | Mobile |  |  |  |  |
| Digest Settings | Desktop |  |  |  |  |
| _и т.д._ |  |  |  |  |  |

## 4. Инфраструктура / Ресурсы
- Используемые версии Postgres/Redis/Celery/Node/Poetry.
- Среднее потребление CPU/RAM сервисов (по данным мониторинга или `docker stats`).
- Оценка размера БД (объём таблиц `news_items`, `company_analytics_snapshots`, и т.д.).

## 5. Риски и Наблюдения
- Краткий список выявленных проблем, которые нужно учитывать при рефакторинге.
- Предложения по улучшению мониторинга/логирования уже на стадии подготовки.

---

**Ответственный:** _Имя, команда_  
**Дата заполнения:** _YYYY-MM-DD_




