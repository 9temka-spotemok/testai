# Исправление базы данных на Railway

## Проблема
Приложение не запускается из-за ошибок миграций:
- Тип `news_category` не существует (должен быть `newscategory`)
- Таблица `notification_deliveries` не создана
- Миграции находятся в неконсистентном состоянии

## Решение: Выполнить SQL скрипт

### Способ 1: Через Railway CLI (рекомендуется)

```powershell
railway connect postgres
```

Затем скопируйте и выполните весь SQL из файла `fix_database_complete.sql`

### Способ 2: Через Railway Dashboard

1. Откройте https://railway.app
2. Выберите проект → сервис **web**
3. Перейдите в **Data** → **PostgreSQL** → **Query**
4. Скопируйте SQL из файла `fix_database_complete.sql` и выполните

## Что делает скрипт:

1. ✅ Создает enum тип `newscategory` со всеми значениями
2. ✅ Создает enum тип `notificationdeliverystatus`
3. ✅ Создает таблицу `notification_deliveries`
4. ✅ Создает индекс на `status`
5. ✅ Обновляет версию миграции на `1f2a3b4c5d6e`

После выполнения скрипта приложение должно запуститься без ошибок.

## Альтернатива: Отключить автоматические миграции

Если нужно временно отключить автоматическое применение миграций при старте:

В Railway Dashboard добавьте переменную окружения:
```
RUN_MIGRATIONS=false
```

Затем примените миграции вручную через SQL или через Railway Dashboard.

